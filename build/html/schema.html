<!DOCTYPE html>
<html >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

      <title>Avro Schema</title>
    
          <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
          <link rel="stylesheet" href="_static/theme.css " type="text/css" />
      
      <!-- sphinx script_files -->
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>

      
      <!-- bundled in js (rollup iife) -->
      <!-- <script src="_static/theme-vendors.js"></script> -->
      <script src="_static/theme.js" defer></script>
    
  <link rel="index" title="Index" href="genindex.html" />
  <link rel="search" title="Search" href="search.html" />
  <link rel="next" title="Input and Output Utilities" href="io.html" />
  <link rel="prev" title="Avro Python API Documentation" href="index.html" /> 
  </head>

  <body>
    <div id="app">
    <div class="theme-container" :class="pageClasses"><navbar @toggle-sidebar="toggleSidebar">
  <router-link to="index.html" class="home-link">
    
      <span class="site-name">avro-docs</span>
    
  </router-link>

  <div class="links">
    <navlinks class="can-hide">



    </navlinks>
  </div>
</navbar>

      
      <div class="sidebar-mask" @click="toggleSidebar(false)">
      </div>
        <sidebar @toggle-sidebar="toggleSidebar">
          
          <navlinks>
            



            
          </navlinks><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Quick search</span>
    <div class="searchformwrapper">
      <form class="search" action="search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><div class="sidebar-links" role="navigation" aria-label="main navigation">
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="index.html#">Introduction</a></span>
      </p>
      <ul class="current">
        
          <li class="toctree-l1 ">
            
              <a href="index.html" class="reference internal ">Avro Python API Documentation</a>
            

            
          </li>

        
          <li class="toctree-l1 current">
            
              <a href="#" class="reference internal current">Avro Schema</a>
            

            
              <ul>
                
                  <li class="toctree-l2"><a href="#avro-schema" class="reference internal">Avro Schema</a></li>
                
                  <li class="toctree-l2"><a href="#reference-api-for-classes-and-methods" class="reference internal">Reference API for Classes and Methods</a></li>
                
              </ul>
            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="io.html" class="reference internal ">Input and Output Utilities</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="datafile.html" class="reference internal ">DataFile Reader and Writer Python APIs</a>
            

            
          </li>

        
      </ul>
    </div>
  
</div>
        </sidebar>

      <page>
          <div class="body-header" role="navigation" aria-label="navigation">
  
  <ul class="breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
    
    <li>Avro Schema</li>
  </ul>
  

  <ul class="page-nav">
  <li class="prev">
    <a href="index.html"
       title="previous chapter">← Avro Python API Documentation</a>
  </li>
  <li class="next">
    <a href="io.html"
       title="next chapter">Input and Output Utilities →</a>
  </li>
</ul>
  
</div>
<hr>
          <div class="content" role="main" v-pre>
            
  <section id="avro-schema">
<h1>Avro Schema<a class="headerlink" href="#avro-schema" title="Permalink to this headline">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Avro Schemas are created in JSON format, which is lightweight text-based data format. It is composed of primitive and complex data types. Learn more about, <a class="reference external" href="https://avro.apache.org/docs/1.8.2/spec.html#schemas">Avro Specification for Schemas</a>.</p>
<p>A sample schema <code>example.avsc</code> is created to serialize and deserialize the data given below:</p>
<p><strong>example.avsc</strong></p>
<div class="highlight-angular2html notranslate"><div class="highlight"><pre><span></span>
{  &quot;namespace: &quot;example.avro&quot;,
   &quot;type&quot; : &quot;record&quot;,
   &quot;name&quot; : &quot;Employee&quot;,
   &quot;fields&quot; : [
    { &quot;name&quot; : &quot;name&quot; , &quot;type&quot; : &quot;string&quot; },
      { &quot;name&quot; : &quot;employee_id&quot; , &quot;type&quot; : &quot;int&quot;}
   ]
}

</pre></div>
</div>
</section>
<section id="record-description">
<h2>Record Description<a class="headerlink" href="#record-description" title="Permalink to this headline">¶</a></h2>
<table>
<thead>
<tr>
	<th>Field</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td><code>namespace</code>&nbsp;</td>
				<td><strong>(Optional)</strong> Namespace which defines the full name of the schema.&nbsp;</td>
			</tr>
			<tr>
				<td><code>type</code>&nbsp;</td>
				<td><strong>(Required)</strong> Type of document. In general if the document type is "record", it must have fields and data types.&nbsp;</td>
			</tr>
			<tr>
				<td><code>name</code>&nbsp;</td>
				<td><strong>(Required)</strong>The name of the namespace under which all the object resides.&nbsp;</td>
			</tr>
		</tbody>
</table>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more information, see <a class="reference external" href="https://avro.apache.org/docs/1.11.1/getting-started-python/#defining-a-schema">Defining a Schema</a>.</p>
</div>
<p>As a next step, you can serialize and deserialize the <code class="docutils literal notranslate"><span class="pre">example.avsc</span></code> avro schema data file using the code snippet and running the <code class="docutils literal notranslate"><span class="pre">schema.py</span></code> file.</p>
</section>
<section id="serializing-and-deserializing">
<h2>Serializing and Deserializing<a class="headerlink" href="#serializing-and-deserializing" title="Permalink to this headline">¶</a></h2>
<p>The data in Avro is stored along with its schema. You can always read the serialized data without code generation in Python. Once you have <a class="reference external" href="https://avro.apache.org/docs/1.11.1/getting-started-python/#defining-a-schema">defined the schema</a>, you can <code>import</code> avro package and add the serialization and deserialization process using the <code>DataFileReader</code> library in Avro.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://avro.apache.org/docs/1.11.1/getting-started-python/">Getting Started with Avro(Python)</a>.</p>
</div>
<p><strong>schema.py</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">avro.schema</span>
<span class="kn">from</span> <span class="nn">avro.datafile</span> <span class="kn">import</span> <span class="n">DataFileReader</span><span class="p">,</span> <span class="n">DataFileWriter</span>
<span class="kn">from</span> <span class="nn">avro.io</span> <span class="kn">import</span> <span class="n">DatumReader</span><span class="p">,</span> <span class="n">DatumWriter</span>

<span class="n">schema</span> <span class="o">=</span> <span class="n">avro</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;example.avsc&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

<span class="n">writer</span> <span class="o">=</span> <span class="n">DataFileWriter</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;example.avro&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">),</span> <span class="n">DatumWriter</span><span class="p">(),</span> <span class="n">schema</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alyssa&quot;</span><span class="p">,</span> <span class="s2">&quot;employee_id&quot;</span><span class="p">:</span> <span class="mi">256</span><span class="p">})</span>
<span class="n">writer</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Ben&quot;</span><span class="p">,</span> <span class="s2">&quot;employee_id&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">})</span>
<span class="n">writer</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Emiley&quot;</span><span class="p">,</span> <span class="s2">&quot;employee_id&quot;</span><span class="p">:</span> <span class="mi">67</span><span class="p">})</span>
<span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">reader</span> <span class="o">=</span> <span class="n">DataFileReader</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;example.avro&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">),</span> <span class="n">DatumReader</span><span class="p">())</span>
<span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<span class="n">reader</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Avro implements with Python to provide you fast and reliable, no-code generation serialization system. The Avro Python API uses the following classes and methods for serialization and deserialization of Avro Schemas. For serialization it is necessary to use python class/methods.</p>
<p>In our example, we have created <code class="docutils literal notranslate"><span class="pre">example.avsc</span></code> schema for employee users and serialized and deserialized the data that generates the output in <code class="docutils literal notranslate"><span class="pre">example.avro</span></code> file in a binary format.
A simple python class that initializes the object of <code class="docutils literal notranslate"><span class="pre">EmployeeClass</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">EmployeeClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emp_id</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emp_id</span> <span class="o">=</span> <span class="n">emp_id</span>
</pre></div>
</div>
<p>Defining the instance of <code class="docutils literal notranslate"><span class="pre">EmployeeClass</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">employee_user</span> <span class="o">=</span> <span class="n">EmployeeClass</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Ben&#39;</span><span class="p">,</span> <span class="n">emp_id</span><span class="o">=</span> <span class="mi">348</span><span class="p">)</span>
</pre></div>
</div>
<p>You can invoke the methods within the <code class="docutils literal notranslate"><span class="pre">EmployeeClass</span></code> to define the schema.</p>
</section>
</section>
<section id="reference-api-for-classes-and-methods">
<h1>Reference API for Classes and Methods<a class="headerlink" href="#reference-api-for-classes-and-methods" title="Permalink to this headline">¶</a></h1>
<h3><i>__init__</i></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method to initializes a new Schema object. To initialize a new schema object, you need to pass two parameters, <code class="docutils literal notranslate"><span class="pre">type</span></code> and <code class="docutils literal notranslate"><span class="pre">other_props</span></code>. The schema object is initialized within abstract base class.</p>
<h4>Parameter Description</h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>string</p></td>
<td><p>Type of Schema to be initialized. Learn more about <a class="reference external" href="https://avro.apache.org/docs/1.8.2/spec.html#schemas">data types in Avro</a>.</p></td>
<td><p>“record”, “Enum”, “Arrays”, “Maps”, “Union”, “Fixed”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">other_props</span></code></p></td>
<td><p>dict</p></td>
<td><p>Dictionary of additional properties of schema.(optional)</p></td>
<td><p>This can be created using decorators. For example, “name”, “fullname”, etc.</p></td>
</tr>
</tbody>
</table>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Schema</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span> <span class="n">Employee</span><span class="o">.</span><span class="n">EmployeeMeta</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">other_props</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">VALID_TYPES</span><span class="p">:</span>
      <span class="k">raise</span> <span class="n">SchemaParseException</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not a valid Avro type.&#39;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">)</span>

</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">VALID_TYPES</span></code> is initialized as an immutable version of set object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">VALID_TYPES</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="o">.</span><span class="n">union</span><span class="p">(</span>
  <span class="n">PRIMITIVE_TYPES</span><span class="p">,</span>
  <span class="n">NAMED_TYPES</span><span class="p">,</span>
  <span class="p">[</span>
    <span class="n">ARRAY</span><span class="p">,</span>
    <span class="n">MAP</span><span class="p">,</span>
    <span class="n">UNION</span><span class="p">,</span>
    <span class="n">REQUEST</span><span class="p">,</span>
    <span class="n">ERROR_UNION</span><span class="p">,</span>
  <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<h3><i>__dict__</i></h3>
<p>Returns the schema object.</p>
<p><strong>Return type</strong>: dictionary that contains mapped values.</p>
<h3><i>@property</i></h3>
<p>A decorator within the <code class="docutils literal notranslate"><span class="pre">Schema</span></code> class that defines the properties of schema as a map. The properties can be defined in a map object using dictionary(property-&gt; value).</p>
<h3><i>@property</i> name</h3>
<p>Initialize to return the simple name of the schema.</p>
<p><strong>Return type</strong>: String</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="bp">self</span><span class="o">.</span><span class="n">_props</span> <span class="o">=</span> <span class="p">{}</span>
 <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span>
 <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="nb">type</span>
 <span class="k">if</span> <span class="n">other_props</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other_props</span><span class="p">)</span>

<span class="nd">@property</span>
<span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Return the simple name of the schema. By default the full name of schema is the simple name.</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</pre></div>
</div>
<h3><i>@property</i> fullname</h3>
<p>Initialize to return the full name of the schema.</p>
<p><strong>Return type</strong>: String</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">fullname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

</pre></div>
</div>
<h3><i>@property</i> namespace</h3>
<p>Defines the function to describes the name of the namespace to which the schema object belongs. By default, if there is no namespace is found for the schema it returns <code class="docutils literal notranslate"><span class="pre">None</span></code>. It is used to differentiate one schema type from another should they share the same name.</p>
<p><strong>Return type:</strong> String</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">namespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;namespace&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

</pre></div>
</div>
<h3><i>@property</i> type</h3>
Defines the type of the schema. This comes under the document as well as under the field name. It returns the type of the schema.
<p><strong>Return Type:</strong> String</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
  <span class="k">def</span> <span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span>
</pre></div>
</div>
<h3><i>@property</i> props</h3>
<p>Returns the dictionary containing all properties associated with schema generated from dict that contains reserved and non-reserved properties.</p>
<p><strong>Return type</strong>: dictionary</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">props</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">ImmutableDict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">)</span>
</pre></div>
</div>
<h3><i>@property</i> other_props</h3>
<p>Returns the dictionary of all non-reserved properties associated with schema.</p>
<p><strong>Return type</strong>: dictionary</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>  <span class="nd">@property</span>
  <span class="k">def</span> <span class="nf">other_props</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">FilterKeysOut</span><span class="p">(</span><span class="n">items</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="n">SCHEMA_RESERVED_PROPS</span><span class="p">))</span>
</pre></div>
</div>
<h3><i>__str__</i></h3>
Define this method to return the JSON representation of the schema. 
<p><strong>Return type</strong>: readable JSON output</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_json</span><span class="p">())</span>
</pre></div>
</div>
<h3><i>to_json(self, names)</i></h3>
<p>Converts the schema object into <a class="reference external" href="https://avro.apache.org/docs/1.8.2/spec.html#schemas">AVRO specification representation</a>. The function takes <code class="docutils literal notranslate"><span class="pre">name</span></code> of schema type as a parameter to convert a specific type of schema that have names in it. For example, “record”, “enum”, and “fixed”. This can be passed within the abstract class of the schema definition.</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
  <span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Cannot run abstract method.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<section id="class-name-object">
<h2>Class Name(object)<a class="headerlink" href="#class-name-object" title="Permalink to this headline">¶</a></h2>
<p>Defines class to represent the Avro name.</p>
<h3><i>__init(name, namespace=None)</i></h3>
Initializes object to parse an Avro name. It takes two arguments, `name` and `namespace`.
<h4>Parameter Description</h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>Name of the Avro schema which has to be parse. It can be relative or absolute.</p></td>
<td><p>“Example-employee”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">namespace</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p><code class="docutils literal notranslate"> <span class="pre">(Optional)</span></code> Add namespace if the <code class="docutils literal notranslate"><span class="pre">name</span></code> is relative. If the <code class="docutils literal notranslate"><span class="pre">name</span></code> is absolute, this can be ignored.</p></td>
<td><p>“Example-namespace”</p></td>
</tr>
</tbody>
</table>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Name</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">namespace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">namespace</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
      <span class="c1"># name is absolute, namespace is ignored:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_fullname</span> <span class="o">=</span> <span class="n">name</span>

      <span class="n">match</span> <span class="o">=</span> <span class="n">_RE_FULL_NAME</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fullname</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">SchemaParseException</span><span class="p">(</span>
            <span class="s1">&#39;Invalid absolute schema name: </span><span class="si">%r</span><span class="s1">.&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fullname</span><span class="p">)</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_namespace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fullname</span><span class="p">[:</span><span class="o">-</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>

    <span class="k">else</span><span class="p">:</span>
      <span class="c1"># If name is relative, combine with explicit namespace:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_namespace</span> <span class="o">=</span> <span class="n">namespace</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_fullname</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_namespace</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

      <span class="c1"># Validate the fullname:</span>
      <span class="k">if</span> <span class="n">_RE_FULL_NAME</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fullname</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">SchemaParseException</span><span class="p">(</span>
            <span class="s1">&#39;Invalid schema name </span><span class="si">%r</span><span class="s1"> infered from name </span><span class="si">%r</span><span class="s1"> and namespace </span><span class="si">%r</span><span class="s1">.&#39;</span>
            <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fullname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_namespace</span><span class="p">))</span>

</pre></div>
</div>
<h3><i>@property</i> simple_name</h3>
<p>Returns the simple name of the Avro schema.</p>
<p><strong>Return type</strong>: String</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
  <span class="k">def</span> <span class="nf">simple_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
</pre></div>
</div>
<h3><i>@property</i> namespace</h3>
<p>Returns the parsed Avro name’s namespace. It can be possibly an empty string.</p>
<p><strong>Return type</strong>: String</p>
<h4>Code Example</h4>
<p>Converts the schema object into <a class="reference external" href="https://avro.apache.org/docs/1.8.2/spec.html#schemas">AVRO specification representation</a>. The function takes <code class="docutils literal notranslate"><span class="pre">name</span></code> of schema type as a parameter to convert a specific type of schema that have names in it. For example, “record”, “enum”, and “fixed”. This can be passed within the abstract class of the schema definition.</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
  <span class="k">def</span> <span class="nf">namespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_namespace</span>

</pre></div>
</div>
<h3><i>@property</i> fullname</h3>
<p>Returns the parsed Avro name’s fullname. It always returns a string with period(.).</p>
<p><strong>Return type</strong>: String</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="nd">@property</span>
  <span class="k">def</span> <span class="nf">fullname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fullname</span>
</pre></div>
</div>
</section>
<section id="class-names-object">
<h2>Class Names(object)<a class="headerlink" href="#class-names-object" title="Permalink to this headline">¶</a></h2>
<p>This class tracks the named schema of Avro and default namespace during parsing of Avro schema.
To track Avro schemas that has defined <span class="xref myst">Avro named schemas</span> and default namespace, you can initialize the class. It returns the name of Avro named schema.</p>
<h3><i>__init__(default_namespace=None, names=None)</i></h3>
<p>Initializes a new name tracker. It takes two parameters, <code class="docutils literal notranslate"><span class="pre">default_namespace</span></code> and <code class="docutils literal notranslate"><span class="pre">names</span></code> that provision the tracker to create new namespace.</p>
<h4>Parameter Description</h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">default_namespace</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>(Optional) Default namespace.”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">names</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p><code class="docutils literal notranslate"> <span class="pre">(Optional)</span></code> Initial mapping of known named schemas.</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Names</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default_namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">names</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_names</span> <span class="o">=</span> <span class="n">names</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_default_namespace</span> <span class="o">=</span> <span class="n">default_namespace</span>
</pre></div>
</div>
<h3><i>@property</i> names</h3>
<p>Returns the mapping of known named schema.</p>
<p><strong>Return type</strong>: String</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="nd">@property</span>
  <span class="k">def</span> <span class="nf">names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_names</span>
</pre></div>
</div>
<h3><i>@property</i> default_namespace</h3>
<p>Returns the default namespace(if any). By default it returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if there is no default namespace is defined.</p>
<p><strong>Return type</strong>: String</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="nd">@property</span>
  <span class="k">def</span> <span class="nf">default_namespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_namespace</span>
</pre></div>
</div>
<h3><i>NewWithDefaultNamespace(namespace)</i></h3>
<p>Creates a new tracker with a new default namespace. It overrides the default namespace which has been defined already. It takes <code class="docutils literal notranslate"><span class="pre">namespace</span></code> as an argument.</p>
<h4>Parameter Description</h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">namespace</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>(Required) New name of the default namespace.”</p></td>
</tr>
</tbody>
</table>
<p><strong>Return type</strong>: String</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">NewWithDefaultNamespace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">namespace</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Names</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="p">,</span> <span class="n">default_namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>
</pre></div>
</div>
<h3><i>GetName(name, namespace=None)</i></h3>
<p>Updates the Avro name according to the tracker’s namespace. It takes two arguments, <code class="docutils literal notranslate"><span class="pre">name</span></code> that has to be resolved and an optional <code class="docutils literal notranslate"><span class="pre">namespace</span></code>.</p>
<h4>Parameter Description</h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>(Required) Name to resolve. It can be absolute or relative.”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">namespace</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>(Optional) Explicit namespace. If the <code class="docutils literal notranslate"><span class="pre">name</span></code> is absolute, this can be ignored. However, if <code class="docutils literal notranslate"><span class="pre">name</span></code> is relative, mention the namespace as well.</p></td>
</tr>
</tbody>
</table>
<p><strong>Return type</strong>: String</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">GetName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">namespace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">namespace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_namespace</span>
    <span class="k">return</span> <span class="n">Name</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>
</pre></div>
</div>
<h3><i>GetSchema(name, namespace=None)</i></h3>
<p>Updates Avro Schema by name. It takes two parameters, <code class="docutils literal notranslate"><span class="pre">name</span></code> of the Avro schema to lookup and <code class="docutils literal notranslate"><span class="pre">namespace</span></code> of the Avro schema.</p>
<p><strong>Return type</strong>: Schema object with specified name, if any. By default it returns <code class="docutils literal notranslate"><span class="pre">NONE</span></code>.</p>
<h4>Parameter Description</h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>(Required) Name of the Avro Schema.”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">namespace</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>(Optional) Explicit namespace. If the <code class="docutils literal notranslate"><span class="pre">name</span></code> is absolute, this can be ignored. However, if <code class="docutils literal notranslate"><span class="pre">name</span></code> is relative, mention the namespace as well.</p></td>
</tr>
</tbody>
</table>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
 <span class="k">def</span> <span class="nf">GetSchema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">avro_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetName</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">avro_name</span><span class="o">.</span><span class="n">fullname</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="class-namedschema-schema">
<h2>Class NamedSchema(Schema)<a class="headerlink" href="#class-namedschema-schema" title="Permalink to this headline">¶</a></h2>
<p>This class is the abstract base class of the named Avro Schema. Named Avro Schemas are enumerated by <code class="docutils literal notranslate"><span class="pre">NAMED_TYPES</span></code>. For more information, see <a class="reference external" href="https://avro.apache.org/docs/1.9.1/spec.html#schema_complex">Complex Types in Avro</a>.</p>
<p>Where <code class="docutils literal notranslate"><span class="pre">NAMED_TYPES</span></code> is defined as,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">NAMED_TYPES</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">([</span>
  <span class="n">FIXED</span><span class="p">,</span>
  <span class="n">ENUM</span><span class="p">,</span>
  <span class="n">RECORD</span><span class="p">,</span>
<span class="p">])</span>
</pre></div>
</div>
<h3><i>__init__(type, name, namespace=None, names=None, other_props=None)</i></h3>
<p>Initializes a new named Schema object with properties that contains <code class="docutils literal notranslate"><span class="pre">name</span></code>,<code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">namespace</span></code>, <code class="docutils literal notranslate"><span class="pre">names</span></code>, and additional properties <code class="docutils literal notranslate"><span class="pre">other_props</span></code> associated with the Schema.</p>
<h4>Parameter Description</h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>string</p></td>
<td><p>Name of the Avro Schema. It can be absolute or relative.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>string</p></td>
<td><p>Type of the Avro named Schema. For example, “record”, “Enum”, “Arrays”, “Maps”, “Union”, “Fixed”.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">other_props</span></code></p></td>
<td><p>dict</p></td>
<td><p>Dictionary of additional properties of schema.(optional)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">names</span></code></p></td>
<td><p>string</p></td>
<td><p>Tracker to resolve and register the avro name.</p></td>
</tr>
</tbody>
</table>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
      <span class="bp">self</span><span class="p">,</span>
      <span class="nb">type</span><span class="p">,</span>
      <span class="n">name</span><span class="p">,</span>
      <span class="n">namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
      <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
      <span class="n">other_props</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
  <span class="p">):</span>
    <span class="k">assert</span> <span class="p">(</span><span class="nb">type</span> <span class="ow">in</span> <span class="n">NAMED_TYPES</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Invalid named type: </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_avro_name</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="n">GetName</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>

    <span class="nb">super</span><span class="p">(</span><span class="n">NamedSchema</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">other_props</span><span class="p">)</span>

    <span class="n">names</span><span class="o">.</span><span class="n">Register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s1">&#39;namespace&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace</span>

</pre></div>
</div>
<h3><i>GetSchema(name, namespace=None)</i></h3>
<p>Updates Avro Schema by name. It takes two parameters, <code class="docutils literal notranslate"><span class="pre">name</span></code> of the Avro schema to lookup and <code class="docutils literal notranslate"><span class="pre">namespace</span></code> of the Avro schema.</p>
<p><strong>Return type</strong>: Schema object with specified name, if any. By default it returns <code class="docutils literal notranslate"><span class="pre">NONE</span></code>.</p>
<h4>Parameter Description</h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>(Required) Name of the Avro Schema.”</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">namespace</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>(Optional) Explicit namespace. If the <code class="docutils literal notranslate"><span class="pre">name</span></code> is absolute, this can be ignored. However, if <code class="docutils literal notranslate"><span class="pre">name</span></code> is relative, mention the namespace as well.</p></td>
</tr>
</tbody>
</table>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">GetSchema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">avro_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetName</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">avro_name</span><span class="o">.</span><span class="n">fullname</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

</pre></div>
</div>
</section>
<section id="class-field-object">
<h2>Class Field(object)<a class="headerlink" href="#class-field-object" title="Permalink to this headline">¶</a></h2>
<p>The field holds a JSON array containing the list of fields in the schema, each having name and its type attributes. In general, if the schema type is “record” or any document, it can have multiple fields having values and properties defined in it.</p>
<p><strong>Example</strong>: A record containing the field <code class="docutils literal notranslate"><span class="pre">Employee</span></code> must have <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">age</span></code> of the employee.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;record&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;namespace&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Avro Docs&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Employee&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;fields&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Name&quot;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Age&quot;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">   </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<h3><i>__init__(type, name, index, names=None, doc= None,other_props=None)</i></h3>
<p>The method initializes a schema of a field in a record. To initialize the field, it takes <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">index</span></code>, <code class="docutils literal notranslate"><span class="pre">names</span></code>, <code class="docutils literal notranslate"><span class="pre">doc</span></code>, <code class="docutils literal notranslate"><span class="pre">other_props</span></code> as a parameter.</p>
<h4>Parameter Description</h4>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Field</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
      <span class="bp">self</span><span class="p">,</span>
      <span class="nb">type</span><span class="p">,</span>
      <span class="n">name</span><span class="p">,</span>
      <span class="n">index</span><span class="p">,</span>
      <span class="n">has_default</span><span class="p">,</span>
      <span class="n">default</span><span class="o">=</span><span class="n">_NO_DEFAULT</span><span class="p">,</span>
      <span class="n">order</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
      <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
      <span class="n">doc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
      <span class="n">other_props</span><span class="o">=</span><span class="kc">None</span>
  <span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
      <span class="k">raise</span> <span class="n">SchemaParseException</span><span class="p">(</span><span class="s1">&#39;Invalid record field name: </span><span class="si">%r</span><span class="s1">.&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">order</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">order</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">VALID_FIELD_SORT_ORDERS</span><span class="p">):</span>
      <span class="k">raise</span> <span class="n">SchemaParseException</span><span class="p">(</span><span class="s1">&#39;Invalid record field order: </span><span class="si">%r</span><span class="s1">.&#39;</span> <span class="o">%</span> <span class="n">order</span><span class="p">)</span>

    <span class="c1"># All properties of this record field:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_props</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_has_default</span> <span class="o">=</span> <span class="n">has_default</span>
    <span class="k">if</span> <span class="n">other_props</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other_props</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_index</span> <span class="o">=</span> <span class="n">index</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">if</span> <span class="n">order</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s1">&#39;order&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">order</span>

    <span class="k">if</span> <span class="n">doc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s1">&#39;doc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">doc</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="k">class</span> <span class="nc">Field</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Representation of the schema of a field in a record.&quot;&quot;&quot;</span>

  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
      <span class="bp">self</span><span class="p">,</span>
      <span class="nb">type</span><span class="p">,</span>
      <span class="n">name</span><span class="p">,</span>
      <span class="n">index</span><span class="p">,</span>
      <span class="n">has_default</span><span class="p">,</span>
      <span class="n">default</span><span class="o">=</span><span class="n">_NO_DEFAULT</span><span class="p">,</span>
      <span class="n">order</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
      <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
      <span class="n">doc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
      <span class="n">other_props</span><span class="o">=</span><span class="kc">None</span>
  <span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Initializes a new Field object.</span>
<span class="sd">    Args:</span>
<span class="sd">      type: Avro schema of the field.</span>
<span class="sd">      name: Name of the field.</span>
<span class="sd">      index: 0-based position of the field.</span>
<span class="sd">      has_default:</span>
<span class="sd">      default:</span>
<span class="sd">      order:</span>
<span class="sd">      names:</span>
<span class="sd">      doc:</span>
<span class="sd">      other_props:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
      <span class="k">raise</span> <span class="n">SchemaParseException</span><span class="p">(</span><span class="s1">&#39;Invalid record field name: </span><span class="si">%r</span><span class="s1">.&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">order</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">order</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">VALID_FIELD_SORT_ORDERS</span><span class="p">):</span>
      <span class="k">raise</span> <span class="n">SchemaParseException</span><span class="p">(</span><span class="s1">&#39;Invalid record field order: </span><span class="si">%r</span><span class="s1">.&#39;</span> <span class="o">%</span> <span class="n">order</span><span class="p">)</span>

    <span class="c1"># All properties of this record field:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_props</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_has_default</span> <span class="o">=</span> <span class="n">has_default</span>
    <span class="k">if</span> <span class="n">other_props</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other_props</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_index</span> <span class="o">=</span> <span class="n">index</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>

    <span class="c1"># TODO: check to ensure default is valid</span>
    <span class="k">if</span> <span class="n">has_default</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">default</span>

    <span class="k">if</span> <span class="n">order</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s1">&#39;order&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">order</span>

    <span class="k">if</span> <span class="n">doc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s1">&#39;doc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">doc</span>
</pre></div>
</div>
<h3><i>@property</i> type</h3>
<p>Returns the schema of the field.</p>
<p><strong>Return type</strong>: String</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="nd">@property</span>
  <span class="k">def</span> <span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span>
</pre></div>
</div>
<h3><i>to_json(names)</i></h3>
<p>Returns the JSON string that has been converted from schema object. It takes Avro named schema <code class="docutils literal notranslate"><span class="pre">names</span></code> as a parameter to conver the schema object to JSON string.</p>
<p><strong>Return type</strong>: String</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">names</span> <span class="o">=</span> <span class="n">Names</span><span class="p">()</span>
    <span class="n">to_dump</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">to_dump</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">to_dump</span>

</pre></div>
</div>
</section>
<section id="module-functions">
<h2>Module Functions<a class="headerlink" href="#module-functions" title="Permalink to this headline">¶</a></h2>
<h3><i>Parse(json_string)</i></h3>
<p>Builds a schema from its JSON descriptor in readonly text form. The function takes <code class="docutils literal notranslate"><span class="pre">json_string</span></code> as an argument that returns a parsed Avro schema. When it is unable to parse the <code class="docutils literal notranslate"><span class="pre">json_string</span></code> that it has taken, it raises <code class="docutils literal notranslate"><span class="pre">SchemaParseException</span></code>.</p>
<p><strong>Return type</strong>: string. If not parsed correctly, it throws an Parse Exception error.</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">Parse</span><span class="p">(</span><span class="n">json_string</span><span class="p">):</span>
  <span class="k">try</span><span class="p">:</span>
    <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_string</span><span class="p">)</span>
  <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exn</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">SchemaParseException</span><span class="p">(</span>
        <span class="s1">&#39;Error parsing schema from JSON: </span><span class="si">%r</span><span class="s1">. &#39;</span>
        <span class="s1">&#39;Error message: </span><span class="si">%r</span><span class="s1">.&#39;</span>
        <span class="o">%</span> <span class="p">(</span><span class="n">json_string</span><span class="p">,</span> <span class="n">exn</span><span class="p">))</span>

  <span class="c1"># Initialize the names object</span>
  <span class="n">names</span> <span class="o">=</span> <span class="n">Names</span><span class="p">()</span>

  <span class="c1"># construct the Avro Schema object</span>
  <span class="k">return</span> <span class="n">SchemaFromJSONData</span><span class="p">(</span><span class="n">json_data</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="avro-exceptions-for-schema">
<h2>Avro Exceptions for Schema<a class="headerlink" href="#avro-exceptions-for-schema" title="Permalink to this headline">¶</a></h2>
<h3><i>SchemaParseException(AvroException)</i></h3>
<p>SchemaParseException are throws while parsing Avro schema description. This can be implemented in any class such as <code class="docutils literal notranslate"><span class="pre">Name</span></code> and <code class="docutils literal notranslate"><span class="pre">Schema</span></code> class where Avro properties are mapped.</p>
<h4>Code Example</h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SchemaParseException</span><span class="p">(</span><span class="n">AvroException</span><span class="p">):</span>
  <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Schema</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">abc</span><span class="o">.</span><span class="n">ABCMeta</span><span class="p">):</span>
  <span class="c1"># Abstract base class for all Schema classes.</span>

  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">other_props</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="c1"># Initializes a new schema object.</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">VALID_TYPES</span><span class="p">:</span>
      <span class="k">raise</span> <span class="n">SchemaParseException</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not a valid Avro type.&#39;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">)</span>

</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://avro.apache.org/docs/1.8.2/spec.html#schemas">Avro Specification for Schema and Data Types</a>.</p></li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you have <a class="reference external" href="https://avro.apache.org/docs/1.11.1/getting-started-python/">installed the Avro Python package</a>, you can quickly get started by importing the <code class="docutils literal notranslate"><span class="pre">avro</span></code> package in your code. A working example is given in the file below:</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">avro</span>
<span class="kn">from</span> <span class="nn">avro.datafile</span> <span class="kn">import</span> <span class="n">DataFileWriter</span><span class="p">,</span> <span class="n">DataFileReader</span>
<span class="kn">from</span> <span class="nn">avro.io</span> <span class="kn">import</span> <span class="n">DatumWriter</span><span class="p">,</span> <span class="n">DatumReader</span>

<span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;avro.example.User&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;record&#39;</span><span class="p">,</span>
    <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span><span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Parse the schema so we can use it to write the data</span>
<span class="n">schema_parsed</span> <span class="o">=</span> <span class="n">avro</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>

<span class="c1"># Write data to an avro file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;users.avro&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">DataFileWriter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">DatumWriter</span><span class="p">(),</span> <span class="n">schema_parsed</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">77</span><span class="p">})</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Tracy&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">53</span><span class="p">})</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># Read data from an avro file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;users.avro&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">DataFileReader</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">DatumReader</span><span class="p">())</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">meta</span><span class="p">)</span>
    <span class="n">schema_from_file</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;avro.schema&#39;</span><span class="p">])</span>
    <span class="n">users</span> <span class="o">=</span> <span class="p">[</span><span class="n">user</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">]</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Schema that we specified:</span><span class="se">\n</span><span class="s1"> </span><span class="si">{</span><span class="n">schema</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Schema that we parsed:</span><span class="se">\n</span><span class="s1"> </span><span class="si">{</span><span class="n">schema_parsed</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Schema from users.avro file:</span><span class="se">\n</span><span class="s1"> </span><span class="si">{</span><span class="n">schema_from_file</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Users:</span><span class="se">\n</span><span class="s1"> </span><span class="si">{</span><span class="n">users</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># Schema that we specified:</span>
<span class="c1">#  {&#39;name&#39;: &#39;avro.example.User&#39;, &#39;type&#39;: &#39;record&#39;,</span>
<span class="c1">#   &#39;fields&#39;: [{&#39;name&#39;: &#39;name&#39;, &#39;type&#39;: &#39;string&#39;}, {&#39;name&#39;: &#39;age&#39;, &#39;type&#39;: &#39;int&#39;}]}</span>
<span class="c1"># Schema that we parsed:</span>
<span class="c1">#  {&quot;type&quot;: &quot;record&quot;, &quot;name&quot;: &quot;User&quot;, &quot;namespace&quot;: &quot;avro.example&quot;,</span>
<span class="c1">#   &quot;fields&quot;: [{&quot;type&quot;: &quot;string&quot;, &quot;name&quot;: &quot;name&quot;}, {&quot;type&quot;: &quot;int&quot;, &quot;name&quot;: &quot;age&quot;}]}</span>
<span class="c1"># Schema from users.avro file:</span>
<span class="c1">#  {&#39;type&#39;: &#39;record&#39;, &#39;name&#39;: &#39;User&#39;, &#39;namespace&#39;: &#39;avro.example&#39;,</span>
<span class="c1">#   &#39;fields&#39;: [{&#39;type&#39;: &#39;string&#39;, &#39;name&#39;: &#39;name&#39;}, {&#39;type&#39;: &#39;int&#39;, &#39;name&#39;: &#39;age&#39;}]}</span>
<span class="c1"># Users:</span>
<span class="c1">#  [{&#39;name&#39;: &#39;Pierre-Simon Laplace&#39;, &#39;age&#39;: 77}, {&#39;name&#39;: &#39;John von Neumann&#39;, &#39;age&#39;: 53}]</span>

</pre></div>
</div>
</section>
</section>


          </div>
          <div class="page-nav">
            <div class="inner"><ul class="page-nav">
  <li class="prev">
    <a href="index.html"
       title="previous chapter">← Avro Python API Documentation</a>
  </li>
  <li class="next">
    <a href="io.html"
       title="next chapter">Input and Output Utilities →</a>
  </li>
</ul><div class="footer" role="contentinfo">
      &#169; Copyright 2022, Dev Prakash Sharma.
    <br>
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0 with <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a> 0.8.0.
</div>
            </div>
          </div>
      </page>
    </div></div>
    
    
  </body>
</html>